<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Help Center | Smart Drainage System</title>

  <!-- Bootstrap & Fonts -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"/>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet"/>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet"/>

  <style>
    :root {
      --primary: #00c9a7;
      --accent: #ff6f61;
      --glass-bg: rgba(255, 255, 255, 0.15);
      --text-color: #fff;
      --card-bg: rgba(255, 255, 255, 0.1);
      --faq-bg: rgba(255, 255, 255, 0.05);
    }

    [data-theme="dark"] {
      --glass-bg: rgba(0, 0, 0, 0.15);
      --card-bg: rgba(0, 0, 0, 0.1);
      --faq-bg: rgba(0, 0, 0, 0.05);
      --text-color: #e0e0e0;
    }

    body {
      font-family: 'Poppins', sans-serif;
      margin: 0;
      background: linear-gradient(135deg, #00c9a7, #ff6f61);
      color: var(--text-color);
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 20px;
      transition: background 0.3s ease;
    }

    .container-glass {
      background: var(--glass-bg);
      border-radius: 20px;
      padding: 40px;
      backdrop-filter: blur(15px);
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
      max-width: 900px;
      width: 100%;
    }

    h2 {
      font-weight: 700;
      text-align: center;
      margin-bottom: 30px;
    }

    .card {
      background: var(--card-bg);
      border: none;
      border-radius: 15px;
      margin-bottom: 20px;
      color: var(--text-color);
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
    }

    .list-group-item {
      background: transparent;
      border: none;
      border-bottom: 1px solid rgba(255, 255, 255, 0.2);
      color: var(--text-color);
    }

    .btn-resolve {
      font-size: 0.8rem;
      background-color: var(--primary);
      color: #fff;
      border: none;
    }

    .btn-resolve:hover {
      background-color: var(--accent);
    }

    .accordion-button {
      background: rgba(255, 255, 255, 0.1);
      color: #000 !important;
    }

    .accordion-button:not(.collapsed) {
      background-color: var(--primary);
      color: #fff !important;
    }

    .accordion-body {
      background: rgba(255, 255, 255, 0.05);
      color: #000 !important;
    }
.chatbot-btn {
  position: fixed;
  bottom: 30px;
  right: 30px;
  width: 60px;
  height: 60px;
  background: #007bff;
  border: none;
  border-radius: 50%;
  color: black;
  font-size: 24px;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
  z-index: 1000;
  cursor: pointer;
}

.chatbot-btn:hover {
  background: #0056b3;
}

.chatbot-container {
  position: fixed;
  bottom: 100px;
  right: 30px;
  width: 300px;
  height: 400px;
  background: white;
  border-radius: 10px;
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
  z-index: 1001;
  display: flex;
  flex-direction: column;
  border: 1px solid #ccc;
}

.chatbot-header {
  background: #007bff;
  color: white;
  padding: 10px;
  display: flex;
  justify-content: space-between;
  align-items: center;
  border-top-left-radius: 10px;
  border-top-right-radius: 10px;
}

.chatbot-messages {
  flex: 1;
  padding: 10px;
  overflow-y: auto;
  color:black;
  font-size: 14px;
  border-bottom: 1px solid #ccc;
}

.chatbot-input-group {
  display: flex;
  padding: 10px;
  border-top: 1px solid #ccc;
}

.chatbot-input-group input {
  flex: 1;
  padding: 8px;
  border: 1px solid #ddd;
  border-right: none;
  border-radius: 4px 0 0 4px;
}

.chatbot-input-group button {
  border-radius: 0 4px 4px 0;
}
    .fab, .chatbot-btn {
      position: fixed;
      bottom: 30px;
      width: 60px;
      height: 60px;
      border-radius: 50%;
      color: white;
      font-size: 28px;
      border: none;
      box-shadow: 0 4px 20px rgba(0,0,0,0.3);
      z-index: 1000;
    }

    .fab:hover, .chatbot-btn:hover {
      background: var(--primary);
    }


    .fab {
      right: 30px;
      background: var(--accent);
    }

    .theme-toggle {
      position: absolute;
      top: 15px;
      right: 15px;
      cursor: pointer;
    }

    .star-rating label {
      font-size: 1.2rem;
      color: gold;
      margin-right: 5px;
      cursor: pointer;
    }

    .sidebar {
      position: fixed;
      top: 0;
      left: 0;
      height: 100vh;
      width: 220px;
      background-color: rgba(0, 0, 0, 0.7);
      backdrop-filter: blur(10px);
      padding-top: 60px;
      z-index: 999;
      transition: all 0.3s ease;
    }

    body {
      padding-left: 240px;
    }

    .sidebar .nav-link {
      font-weight: 500;
      margin-bottom: 10px;
    }

    .sidebar .nav-link:hover {
      color: var(--accent);
    }

    @media (max-width: 768px) {
      .sidebar {
        width: 180px;
      }
      body {
        padding-left: 0;
      }
    }

  </style>
</head>
<body>

<!-- Theme Toggle -->
<button class="theme-toggle btn btn-sm" onclick="toggleTheme()">
  <i id="theme-icon" class="fas fa-moon"></i>
</button>

<!-- Sidebar Toggle Button -->
<button id="sidebarToggle" class="btn btn-sm text-white position-absolute" style="top: 15px; left: 15px; z-index: 1001;">
  <i class="fas fa-bars fa-lg"></i>
</button>

<!-- Sidebar -->
<div id="sidebar" class="sidebar d-none">
  <h5 class="text-white px-3 py-3">üîß Admin Menu</h5>
  <ul class="nav flex-column px-3">
    <li class="nav-item"><a class="nav-link text-white" href="/dashboard">üìä Dashboard</a></li>
    <li class="nav-item"><a class="nav-link text-white" href="/history">üìÅ History</a></li>
    <li class="nav-item"><a class="nav-link text-white" href="/settings">‚öôÔ∏è Setting</a></li>
    <li class="nav-item"><a class="nav-link text-white" href="/analytics">üìà Analytics</a></li>

    <li class="nav-item"><a class="nav-link text-white" href="/help-center">‚ùì Help Center</a></li>
    <li class="nav-item"><a class="nav-link text-white" href="/logout">üö™ Logout</a></li>
  </ul>
</div>

<!-- Main Glass Container -->
<div class="container-glass">
  <h2>üí° Admin Help Center</h2>

  <!-- Issue Form -->
  <div class="card p-4">
    <h4>‚ûï Submit a New Issue</h4>
    <form id="issueForm" class="mb-3">
      <div class="row g-3">
        <div class="col-md-6">
          <input type="text" class="form-control" placeholder="Title" required>
        </div>
        <div class="col-md-6">
          <input type="text" class="form-control" placeholder="Zone" required>
        </div>
        <div class="col-md-6">
          <input type="text" class="form-control" placeholder="Sensor ID" required>
        </div>
        <div class="col-md-6">
          <input type="text" class="form-control" placeholder="Description" required>
        </div>
        <div class="col-12 text-end">
          <button type="submit" class="btn btn-success">Submit</button>
        </div>
      </div>
    </form>
  </div>

  <!-- Reported Issues -->
  <div class="card p-4">
    <h4>üìå Reported Issues</h4>
    <ul class="list-group" id="reportedIssuesList">
      <li class="list-group-item d-flex justify-content-between align-items-center">
        "Sensor in Zone 3 is not responding."
        <button class="btn btn-sm btn-resolve" onclick="markResolved(this)">Resolve</button>
      </li>
      <li class="list-group-item d-flex justify-content-between align-items-center">
        "Dashboard data is not updating in real-time."
        <button class="btn btn-sm btn-resolve" onclick="markResolved(this)">Resolve</button>
      </li>
    </ul>
  </div>

  <!-- User Queries -->
  <div class="card p-4">
    <h4>üí¨ User Queries</h4>
    <ul class="list-group" id="userQueriesList">
      <li class="list-group-item d-flex justify-content-between align-items-center">
        "Can I receive alerts on my alternate email?"
        <button class="btn btn-sm btn-resolve" onclick="markResolved(this)">Resolve</button>
      </li>
      <li class="list-group-item d-flex justify-content-between align-items-center">
        "How do I reset sensor thresholds?"
        <button class="btn btn-sm btn-resolve" onclick="markResolved(this)">Resolve</button>
      </li>
    </ul>
  </div>

  <!-- FAQ Section -->
  <div class="card p-4">
    <h4 class="mb-3">üìö Frequently Asked Questions</h4>
    <div class="accordion" id="faqAccordion">
      <div class="accordion-item">
        <h2 class="accordion-header" id="faq1">
          <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse1">
            üõ†Ô∏è How does the blockage detection system work?
          </button>
        </h2>
        <div id="collapse1" class="accordion-collapse collapse show">
          <div class="accordion-body">
            It uses real-time sensor data, thresholds, and machine learning models to detect and alert on anomalies.
          </div>
        </div>
      </div>
      <div class="accordion-item">
        <h2 class="accordion-header" id="faq2">
          <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse2">
            üìß Can I add multiple emails for alerts?
          </button>
        </h2>
        <div id="collapse2" class="accordion-collapse collapse">
          <div class="accordion-body">
            Yes, multiple emails can be configured from the settings panel under Notifications.
          </div>
        </div>
      </div>
      <div class="accordion-item">
        <h2 class="accordion-header" id="faq3">
          <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse3">
            üö® What to do if a sensor goes offline?
          </button>
        </h2>
        <div id="collapse3" class="accordion-collapse collapse">
          <div class="accordion-body">
            Check the power and network. If issues persist, perform a physical inspection.
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Contact Support -->
  <div class="card p-4">
    <h4>üìû Contact Support</h4>
    <p><strong>Email:</strong> support@smartdrainage.com</p>
    <p><strong>Phone:</strong> +91-9876543210</p>
    <p><strong>Hours:</strong> Mon‚ÄìFri, 9 AM ‚Äì 6 PM</p>
  </div>
</div>

<!-- Chatbot Button -->
<button class="chatbot-btn" onclick="toggleChatbot()">
  <i class="fas fa-comments"></i>
</button>

<!-- Chatbot UI >
<div-- id="chatbot-container" style="display: none; position: fixed; bottom: 100px; right: 30px; width: 300px; height: 400px; background: white; border-radius: 10px; box-shadow: 0 4px 8px rgba(0,0,0,0.2); z-index: 1001; display: flex; flex-direction: column;">
  <div style="background: #007bff; color: white; padding: 10px; border-top-left-radius: 10px; border-top-right-radius: 10px;">
    <strong>Chatbot</strong>
    <button onclick="closeChatbot()" style="float: right; background: none; border: none; color: white; font-size: 16px;">&times;</button>
  </div>
  <div id="chatbot-messages" style="flex: 1; padding: 10px; overflow-y: auto; font-size: 14px;"></div>
  <div style="display: flex; border-top: 1px solid #ccc;">
    <input type="text" id="chatbot-input" placeholder="Type a message..." style="flex: 1; border: none; padding: 10px;" onkeydown="if(event.key === 'Enter') sendMessage()">
    <button onclick="sendMessage()" style="background: #007bff; color: white; border: none; padding: 10px 15px;">Send</button>
  </div>
</div-->
<div id="chatbotContainer" class="chatbot-container" style="display: none;">
  <div class="chatbot-header">
    <strong>Chatbot</strong>
    <button class="chatbot-close" onclick="closeChatbot()">&times;</button>
  </div>
  <div id="chatbotMessages" class="chatbot-messages"></div>
  <div class="chatbot-input-group">
    <input type="text" id="chatbotInput" placeholder="Type a message..." onkeydown="if(event.key === 'Enter') sendMessage();">
    <button onclick="sendMessage()" class="btn btn-primary">Send</button>
  </div>
</div>

<!-- JavaScript Logic -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script>
  function markResolved(button) {
    const item = button.closest("li");
    item.classList.add("text-muted", "text-decoration-line-through");
    button.remove();
    const feedbackPrompt = document.createElement("div");
    feedbackPrompt.innerHTML = `
      <div class="mt-2">
        <p>Rate this resolution:</p>
        <div class="star-rating">
          ${[1,2,3,4,5].map(i => `
            <input type="radio" id="star${i}" name="rating" value="${i}">
            <label for="star${i}">&#9733;</label>
          `).join('')}
        </div>
      </div>
    `;
    item.appendChild(feedbackPrompt);
  }

  document.getElementById("issueForm").addEventListener("submit", function(e) {
    e.preventDefault();
    const inputs = this.querySelectorAll("input");
    const [title, zone, sensor, description] = [...inputs].map(i => i.value);
    const newIssue = document.createElement("li");
    newIssue.className = "list-group-item d-flex justify-content-between align-items-center";
    newIssue.innerHTML = `"${description}" (Zone: ${zone}, Sensor: ${sensor}) <button class="btn btn-sm btn-resolve" onclick="markResolved(this)">Resolve</button>`;
    document.getElementById("reportedIssuesList").appendChild(newIssue);
    this.reset();
  });

  function toggleTheme() {
    const root = document.documentElement;
    const isDark = root.getAttribute("data-theme") === "dark";
    root.setAttribute("data-theme", isDark ? "light" : "dark");
    document.getElementById("theme-icon").className = isDark ? "fas fa-moon" : "fas fa-sun";
  }

  document.getElementById("sidebarToggle").addEventListener("click", () => {
    document.getElementById("sidebar").classList.toggle("d-none");
  });
// Toggle chatbot visibility
function toggleChatbot() {
    const chatbot = document.getElementById("chatbotContainer");
    chatbot.style.display = chatbot.style.display === "none" ? "block" : "none";
}
// Ensure chatbot always appears on top
document.getElementById("chatbotBtn").addEventListener("click", () => {
    const chatbot = document.getElementById("chatbotContainer");
    chatbot.style.display = chatbot.style.display === "none" ? "flex" : "none";
});
// Close chatbot
function closeChatbot() {
    document.getElementById("chatbotContainer").style.display = "none";
}

// Send message and get bot response
function sendMessage() {
    const input = document.getElementById("chatbotInput");
    const message = input.value.trim();
    const messagesDiv = document.getElementById("chatbotMessages");

    if (!message) return;

    // Append user message
    const userMsg = document.createElement("div");
    userMsg.innerHTML = `<strong>You:</strong> ${message}`;
    messagesDiv.appendChild(userMsg);

    // Generate bot response
    let reply = "I'm not sure how to help with that.";

    // Keyword-based responses
    if (message.toLowerCase().includes("reset")) {
        reply = "To reset thresholds, go to Settings > Sensors and click 'Reset Thresholds'.";
    } else if (message.toLowerCase().includes("email")) {
        reply = "You can add email alerts in Settings > Notifications.";
    } else if (message.toLowerCase().includes("sensor") || message.toLowerCase().includes("offline")) {
        reply = "Check if the sensor is powered and has network connectivity.";
    } else if (message.toLowerCase().includes("history")) {
        reply = "Visit the History tab to view past blockage records.";
    } else if (message.toLowerCase().includes("download")) {
        reply = "Click the 'Download CSV' button in the History tab.";
    } else if (message.toLowerCase().includes("logout")) {
        reply = "Click the 'Logout' button in the sidebar.";
    }

    // Append bot response
    const botMsg = document.createElement("div");
    botMsg.innerHTML = `<strong>Bot:</strong> ${reply}`;
    messagesDiv.appendChild(botMsg);

    // Scroll to bottom
    messagesDiv.scrollTop = messagesDiv.scrollHeight;
    input.value = "";
}

</script>
</body>
</html>